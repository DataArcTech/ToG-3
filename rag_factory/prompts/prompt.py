KG_TRIPLES_PROMPT = """
# 你是一个面向"行测（行政职业能力测验）"考试内容的命名实体识别与关系抽取系统，请对以下句子进行实体识别与关系抽取任务。

# ## 核心实体类型（枚举）

# 实体类型只能从以下 6 个枚举值中选择：
# 1. 题型
# 2. 考点
# 3. 解题方法
# 4. 公式与规则
# 5. 题目结构
# 6. 考试模块

# ---

# ### 实体类型定义

# **题型**（QuestionType）：含义：考试题目的形式类别，反映“怎么考”
# 示例：主旨概括题、削弱型推理题、图形推理、比重计算题

# **考点**KnowledgePoint）：具体知识点、能力点或考查内容，反映“考什么” 
# 示例：增长率计算、加强论证、数量比较、法律条文理解

# **解题方法**（SolutionMethod）：含义：解题的技巧、原则或通用步骤，反映“怎么解”
# 示例：关键词定位法、代入排除法、主体一致原则、尾数估算法

# **公式与规则**（FormulaRule）：含义：明确的数学公式、逻辑规则、数量关系表达，支撑计算与推理 
# 示例：现期量 = 基期量 × (1 + r)、A 是 B 的 1.8 倍、因为A所以B

# **题目结构**（QuestionStructure）：含义：题干与选项的组成方式、干扰项设置方式，反映题目设计特征 
# 示例：题干包含文字+表格、选项为四选一并列、干扰项使用绝对化表述

# **考试模块**（ExamModule）：含义：行测试卷的一级模块或大类，便于体系化管理
# 示例：资料分析、言语理解与表达、数量关系、判断推理、常识判断

# ---

# ### 关系类型速查表（固定集合）

# | 关系类型         | 定义 | 示例 |
# |----------------|------|------|
# | **考查于**（ExaminesIn） | 某个考点、题型、方法出现在某模块或题目情境中 | "增长率计算" 考查于 "资料分析" |
# | **公式定义**（FormulaOf） | 公式表达某个考点或计算方法 | "现期量 = 基期量 × (1 + r)" 公式定义 "增长率计算" |
# | **使用方法**（UsesMethod） | 解题中使用某个方法、技巧 | "类比推理" 使用方法 "功能关系分析法" |
# | **包含/属于**（Contains/BelongsTo） | 模块/题型包含子题型或考点 | "判断推理" 包含 "类比推理" |
# | **逻辑关联**（LogicallyRelatedTo） | 两个信息存在逻辑推理或数量关系 | "因为A" 逻辑关联 "所以B" |
# | **等于/表示**（EqualsTo/Represents） | 数学表达式与文字描述等价 | "同比增长8.7%" 等于 "现期量=..." |

# ---

# ## 输出格式要求

# 返回 JSON，包含以下字段：
# - **entity_list**：识别到的实体列表（entity_text, entity_type, entity_description）
# - **relation_list**：识别到的关系列表（head_entity, relation_type, tail_entity, relation_description）

# `entity_type` 必须严格从上面的 6 个枚举值中选择。  
# `relation_type` 必须严格从“关系类型速查表”中选择。

# ### 输出格式示例：
# {{
#     "entity_list": [
#         {{
#             "entity_text": "实体内容",
#             "entity_type": "题型体系 | 考点体系 | 解题模型 | 题目结构 | 逻辑与关系结构",
#             "entity_description": "简要描述该实体在行测考试中的作用或含义"
#         }}
#     ],
#     "relation_list": [
#         {{
#             "head": "实体A",
#             "relation_type": "关系类型",
#             "tail": "实体B",
#             "relation_description": "简要说明该关系在行测考试中的作用或含义"
#         }}
#     ]
# }}

# ---

# ## 标注示例

# **输入句子：**
# "资料分析部分经常考查增长率计算，公式为现期量 = 基期量 × (1 + r)。"

# **标注结果：**
# {{
#     "entity_list": [
#         {{"entity_text": "资料分析", "entity_type": "题型体系", "entity_description": "行测考试中通过图表和数据考查计算、比较、推理能力的题型"}},
#         {{"entity_text": "增长率计算", "entity_type": "考点体系", "entity_description": "资料分析中常见的计算类考点，涉及数据变化幅度的计算"}},
#         {{"entity_text": "现期量 = 基期量 × (1 + r)", "entity_type": "逻辑与关系结构", "entity_description": "增长率计算的基本数学公式表达"}}
#     ],
#     "relation_list": [
#         {{"head": "资料分析", "relation_type": "考查于", "tail": "增长率计算", "relation_description": "资料分析题型中常考查该计算类考点"}},
#         {{"head": "增长率计算", "relation_type": "公式定义", "tail": "现期量 = 基期量 × (1 + r)", "relation_description": "该公式为增长率计算的数学表达方式"}}
#     ]
# }}

# ---

# ## 标注要求

# - 实体与关系必须从原文直接提取，不推断、不扩展
# - `entity_type` 只能是 5 个枚举值之一
# - `relation_type` 只能用“关系类型速查表”中的值
# - 实体与关系的 head/tail 必须引用 entity_list 中的内容
# - 若无关系，relation_list 返回空数组

# ## 输入句子：
# {text}

# ## 输出：
# """



KG_TRIPLES_PROMPT= """
你是一个面向 **行测（行政职业能力测验）** 的 **命名实体识别与关系抽取系统**。

### 实体类型（6类，必须从中选择）

1. **题型**：题目形式类别（怎么考）
示例：主旨概括题、削弱型推理题、图形推理、比重计算题
2. **考点**：知识点/能力点（考什么）
示例：增长率计算、加强论证、数量比较、法律条文理解
3. **解题方法**：技巧/原则/步骤（怎么解）
示例：关键词定位法、代入排除法、主体一致原则、尾数估算法
4. **公式与规则**：数学公式、逻辑规则、数量关系表达
示例：现期量 = 基期量 × (1 + r)、A 是 B 的 1.8 倍、因为A所以B
5. **题目结构**：题干与选项的设计方式
示例：题干包含文字+表格、选项为四选一并列、干扰项使用绝对化表述
6. **考试模块**：行测试卷大类
示例：资料分析、言语理解与表达、数量关系、判断推理、常识判断

---

### 关系类型（固定集合）

* **考查于**（ExaminesIn）：某内容出现在某模块
* **公式定义**（FormulaOf）：公式表达某考点/方法
* **使用方法**（UsesMethod）：解题用某方法
* **包含/属于**（Contains/BelongsTo）：模块或题型的层级关系
* **逻辑关联**（LogicallyRelatedTo）：逻辑/数量关系
* **等于/表示**（EqualsTo/Represents）：表达式与文字等价

---
### 示例

输入：
"资料分析部分经常考查增长率计算，公式为现期量 = 基期量 × (1 + r)。"

输出：
{{
  "entity_list": [
    {{"entity_text": "资料分析", "entity_type": "考试模块", "entity_description": "行测中的数据图表类题型"}},
    {{"entity_text": "增长率计算", "entity_type": "考点", "entity_description": "资料分析常见计算类考点"}},
    {{"entity_text": "现期量 = 基期量 × (1 + r)", "entity_type": "公式与规则", "entity_description": "增长率计算的基本公式"}}
  ],
  "relation_list": [
    {{"head": "增长率计算", "relation_type": "考查于", "tail": "资料分析", "relation_description": "资料分析常考查该考点"}},
    {{"head": "现期量 = 基期量 × (1 + r)", "relation_type": "公式定义", "tail": "增长率计算", "relation_description": "该公式用于增长率计算"}}
  ]
}}


---

### 输入句子

{text}

### 输出
（严格按上面 JSON 格式返回）
"""


ENTITY_EXTRACT_PROMPT = """
你是一个面向 **行测（行政职业能力测验）** 的 **命名实体识别系统**。

### 实体类型（必须从中选择）

1. **考点**：知识点/能力点（考什么）
示例：增长率计算、加强论证、数量比较、法律条文理解

---
### 示例

输入：
"资料分析部分经常考查增长率计算，公式为现期量 = 基期量 × (1 + r)。"

输出：
{{
  "entity_list": [
    {{"entity_text": "增长率计算", "entity_type": "考点"}},
  ]
}}

# 注意：
# 1. 实体类型必须从上面 1 个枚举值中选择
# 2. entity_text 必须从原文直接提取，不推断、不扩展
# 3. 只需要提取通用考点
---
### 输入句子
{text}

### 输出
（严格按上面 JSON 格式返回）
"""


HYPERRAG_EXTRACTION_PROMPT = """

### 实体类型
1. **题型**：题目形式类别（怎么考）
示例：主旨概括题、削弱型推理题、图形推理、比重计算题
2. **考点**：知识点/能力点（考什么）
示例：增长率计算、加强论证、数量比较、法律条文理解
3. **解题方法**：技巧/原则/步骤（怎么解）
示例：关键词定位法、代入排除法、主体一致原则、尾数估算法
4. **公式与规则**：数学公式、逻辑规则、数量关系表达
示例：现期量 = 基期量 × (1 + r)、A 是 B 的 1.8 倍、因为A所以B
5. **题目结构**：题干与选项的设计方式
示例：题干包含文字+表格、选项为四选一并列、干扰项使用绝对化表述
6. **考试模块**：行测试卷大类
示例：资料分析、言语理解与表达、数量关系、判断推理、常识判断

你是一个图结构信息提取系统。请分析输入文本，抽取以下结构：
1. **事件 (Events)**: 动作或发生的事情。
2. **实体提及 (Mentions)**: 文本中的具名实体。
3. **事件关系 (Event Relations)**: 事件间的逻辑关系（因果、时序、层级、条件）。
4. **实体关系 (Entity Relations)**: 实体间的静态关系。
---
### **执行规则**
1. **事件**：抽取所有动作/变化，填充 `id`、`content`、`type`、`participants`。
2. **实体提及**：抽取所有具名实体，统一 `entity_name`，记录 `event_indices`。
3. **事件关系**：仅抽取文本中明确标注的因果/时序/层级/条件关系。
4. **实体关系**：仅抽取文本中明确描述的静态关系（人事/所属/地理/概念）。
5. **禁止推断**：所有关系和描述必须有文本证据支持。
---
### **输入文本**
{text}

"""


QUERY_ANALYSIS_PROMPT = """
你是一个专业的行测资料分析专家。请分析用户查询并提取关键信息：

1. **提取实体 (extracted_entities)**：
   - 识别行测资料分析中的专业术语和概念
   - 例如：'同比增长率', '环比增长率', '比重', '平均数', '基期', '现期'等
   - 忽略具体的公司名、产品名等背景信息

2. **提取事件 (extracted_events)**：
   - 识别查询对应的行测分析题型或解题行为
   - 例如：'计算增长量', '计算增长率', '比较增长快慢', '计算比重'等

3. **设定查询偏好 (query_preference)**：
   - 如果查询需要具体数据计算，设置更高的chunk_weight（0.7-0.8）
   - 如果查询询问概念或方法，设置更高的event_weight（0.7-0.8）
   - 标准计算题可设置均等权重（各0.5）

查询: {query}

请严格按照JSON格式返回结果。
"""


ANSWER_GENERATION_PROMPT = """
请根据以下背景信息，回答用户的问题。请确保：
1. 回答基于提供的证据
2. 在回答中引用相关证据（如[文档1]、[事件1]等）
3. 如果信息不足，请明确说明
4. 区分文档信息和事件信息的来源

{context}

【用户问题】
{query}

【你的回答】
"""